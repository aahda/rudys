---
import Image from "astro/components/Image.astro";
import logoNegro from "/public/logos/rudys-logo-negro.svg";
---

<section class="w-full flex flex-row flex-wrap bg-black text-white">
  <article class="w-1/3 flex flex-col items-center justify-center">
    <Image class="w-[300px] invert" src={logoNegro} alt="Logo Rudy's Footer" />
    <p class="text-center m-4">
      Descubre la magia de la fusión perfecta entre tierra y mar. En nuestro
      restaurante, cada plato de pollo y pescado es una obra maestra que combina
      tradición chinchana y la creatividad peruana.
    </p>
  </article>

  <article class="w-1/3 flex flex-col items-center justify-center">
    <h3 class="uppercase font-bold text-xl">Apartados del sitio</h3>
    <ul>
      <li><a href="#">Inicio</a></li>
      <li><a href="#">Menú</a></li>
      <li><a href="#">Nosotros</a></li>
      <li><a href="#">Eventos</a></li>
    </ul>
    <h3 class="uppercase font-bold text-xl">Siguenos en</h3>
    <div class="flex flex-row">
      <a href="https://www.facebook.com/profile.php?id=100094893421981">
        <img
          class="invert"
          src="/icons/facebook.svg"
          alt="Link del Facebook"
          loading="lazy"
        />
      </a>
      <a href="https://www.tiktok.com/@restaurante_rudys_">
        <img
          class="invert"
          src="/icons/tiktok.svg"
          alt="Link del Tiktok"
          loading="lazy"
        />
      </a>
    </div>
  </article>

  <article class="w-1/3 flex flex-col items-center justify-center">
    <h3 class="uppercase font-bold text-xl">Visitas</h3>
    <p id="visitasDiarias">Cargando visitas...</p>
  </article>

  <article class="w-full bg-slate-900 text-center">
    <p>© 2024, Rudy's | Todos los derechos reservados.</p>
  </article>
</section>

<style>
  a {
    text-decoration: none;
  }
</style>

<script>
  async function getVisits() {
    try {
      const response = await fetch("/src/pages/api/vercel-analytics");
      if (!response.ok) {
        throw new Error("Error al obtener los datos de Vercel Analytics");
      }

      const data = await response.json();
      return data;
    } catch (error) {
      console.error("Error en getVisits:", error);
      throw error;
    }
  }

  async function showVisits() {
    try {
      const data = await getVisits();
      const visits = data.visits;

      document.getElementById("visitasDiarias").innerText =
        `Visitas diarias: ${visits}`;
    } catch (error) {
      console.error("Error en showVisits:", error);
      document.getElementById("visitasDiarias").innerText =
        "Error al cargar visitas";
    }
  }

  showVisits();
</script>
